#include <iostream>
#include<vector>
#include<unordered_map>
using namespace std;
class Solution {
public:
    int longestPalindrome(vector<string>& words) 
    {  
        unordered_map<string,int> map;
        for(int i=0; i<words.size(); i++)
        {
            map[words[i]]++;
        }

        int cnt=0;
        int min=0;
        bool odd = false;
        for(auto it1=map.begin(); it1!=map.end(); it1++)
        {
            string w1 = it1->first;            
            if(w1[0]!=w1[1])
            {
                for(auto it2=map.begin(); it2!=map.end(); it2++)
                {
                    string w2 = it2->first;
                    if(w1[0] == w2[1] && w1[1] == w2[0])
                    {
                        if(it1->second < it2->second)
                        {
                            min = it1->second;
                        }
                        else
                        {
                            min = it2->second;                      
                        }
                        map[it1->first] -=min;
                        map[it2->first] -= min;
                        cnt+=(min*4);
                    }
                }
            }
            else
            {
                int rem = it1->second%2;

                if(rem && !odd)
                {
                    odd = true;
                    cnt+=2;
                }
                
                int quo = it1->second-rem;
                cnt+=(quo*2);
                map[it1->first]-=quo;
            }
        }
        return cnt;
    }
};
int main()
{
    Solution sol;
    //vector<string> vec ={"lc","cl","gg"}
    //vector<string> vec ={"cc","ll","xx"};
    vector<string> vec ={"dd","aa","bb","dd","aa","dd","bb","dd","aa","cc","bb","cc","dd","cc"};
    cout<<sol.longestPalindrome(vec);
}